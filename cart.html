<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>貓體工學| 購物車</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="grid.css">
    <link rel="stylesheet" href="cart.css">
    <link rel="stylesheet" href="navbar.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script>
        $(document).ready(function(){

            const setFee = () => {  //取得運費的值
                fee = $(":checked").val();
                $('#num_fee').text('NT$ ' + fee);
                check()
            }

            $('input[name="fee"]')[0].checked = true;  //預設自取0元
            setFee();

            //數量加減
            var num = $("#num").val();
            var itemPrice = $('#itemprice').text();
            var price = $('#num_price').text('NT$ '+ itemPrice);
            var fee = $(":checked").val();
            var totalPrice = $('#total_price').text('NT$' + itemPrice)


            $('.fee').click(setFee)
            
            function check(){      //總計
                var price = itemPrice * num;
                $('#num_price').text('NT$ '+ price);

                var totalPrice = price + parseInt(fee);
                $('#total_price').text('NT$' + totalPrice);
            }

            $("#num_minus").click(function(){  //數量
                if(num <= 1){
                    num = 1;
                }else{
                    num = parseInt(num) - 1;
                }
                $('#num').val(num);
                check();
            })
            $("#num_plus").click(function(){
                num ++;
                $('#num').val(num);
                
                check();
            });
        })
          
    </script>
</head>
<body>
    <header>
        <div class="navbar">
            <label for="switch" class="hb"><img src="pictures/hb.svg" alt="選單"></label>
            <input type="checkbox" id="switch">
            <a href="index.html">
                <div class="logo">
                    <img src="pictures/logologo.svg" alt="貓體工學">
                </div>
            </a>
            <nav>
                <ul class="main_nav">
                    <li><a href="shoppingpage.html">所有商品</a></li>
                    <li><a href="stores.html">實體概念店</a></li>
                    <li><a href="reco.html">貓星人的推薦</a></li>
                    <li><a href="question.html">常見問題</a></li>
                </ul>
                <ul class="main_nav_icon">
                    <li><a href="account.html">
                        <div class="img">
                            <img src="pictures/profileIcon.svg" alt="會員登入">
                        </div>
                        <p>會員登入</p>
                    </a></li>
                    <li><a href="cart.html">
                        <div class="img">
                            <img src="pictures/cartIcon.svg" alt="購物車">
                        </div>
                        <p>購物車</p>
                    </a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main>
        <section class="card cartcard" >
            <h1>購物車</h1>
            <div class="card_body">
                <div class="cart_content">
                    <ul>
                        <li class="iteminfo">
                            <div class="itempic">
                                <img src="pictures/item5use.webp" alt="">
                            </div>
                            <div class="itemname"><a href="itempage.html">月亮跳台</a></div>
                        </li>
                        <li class="itemprice" id="itemprice">5500</li>
                        <li class="itemamout">
                            <span id="num_minus">-</span>
                            <input type="text" class="num" id="num" value="1">
                            <span id="num_plus">+</span>
                        </li>
                        <li class="itemdel">
                            <a href="">
                                <img src="pictures/deleateIcon.svg" alt="移除">
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="card_foot">
                <div class="fee">
                    <label><input type="radio" name="fee" value="0">台北概念店自取，運費 0 元</label>
                    <label><input type="radio" name="fee" value="120">宅配，運費 120 元</label>
                    <label><input type="radio" name="fee" value="600">宅配(加安裝)，運費 600 元</label>
                </div>
                <div class="total">
                    <ul>
                        <li>
                            <p>小計</p>
                            <p id="num_price"></p>
                        </li>
                        <li>
                            <p>運費</p>
                            <p id="num_fee"></p>
                        </li>
                        <li>
                            <p>總金額</p>
                            <p id="total_price"></p>
                        </li>
                    </ul>
                </div>
            </div>
            <input type="submit" value="確認">
        </section>
        
        <section class="card infocard">
            <h2>收件資訊</h2>
            <div class="card_body">
                <ul>
                    <li>
                        <label><input type="checkbox">與會員資料相同</label>
                    </li>
                    <li>
                        <p>收件人姓名</p>
                        <input required type="text" placeholder="請輸入真實姓名">
                    </li>
                    <li>
                        <p>手機號碼</p>
                        <input required type="tel" maxlength="10" placeholder="請輸入10位數手機號碼，不需輸入標點符號">
                    </li>
                    <li>
                        <p>收件地址</p>
                        <input required type="text" placeholder="請輸入完整地址">
                    </li>
                    <li>
                        <p>指定到貨日期(僅能盡量安排，無法保證時間)</p>
                        <input type="date">
                    </li>
                    <li>
                        <p>備註</p>
                        <input type="text" placeholder="如有特殊需求請在此備註">
                    </li>
                </ul>
            </div>
            <div class="card_foot">
                <input type="submit" value="送出">
            </div>
        </section>
        
        <section class="card paymentcard">
            <h2>付款方式</h2>
            <div class="card_body">
                <ul>
                    <li>
                        <label><input type="radio" name="payment">ATM轉帳</label>
                    </li>
                    <li>
                        <label><input type="radio" name="payment">信用卡(支援Visa, Master, JCB)</label>
                    </li>
                    <li>
                        <p>信用卡卡號</p>
                        <input type="text" name="N1" maxlength="4" size="4" placeholder="0000" onKeyUp="next(this)">-  
                    	<input type="text" name="N2" maxlength="4" size="4" placeholder="0000" onKeyUp="next(this)">-  
                    	<input type="text" name="N3" maxlength="4" size="4" placeholder="0000" onKeyUp="next(this)">-  
                    	<input type="text" name="N4" maxlength="4" size="4" placeholder="0000" onKeyUp="next(this)">
                    </li>
                    <li>
                        <p>有效日期</p>
                        <input type="text" placeholder="MM/YY" maxlength="4">
                    </li>
                    <li>
                        <p>安全碼</p>
                        <input type="text" placeholder="000" maxlength="3">
                    </li>
                
            </div>
            <div class="card_foot">
                <input type="submit" value="確認付款">
            </div>
        </section>
    </main>
    
    <script>
        //信用卡卡號自動換格
        function next(obj) {  
	    if (obj.value.length == obj.maxLength) {  
	        do {  
	            obj = obj.nextSibling;  
	        } while (obj.nodeName != "INPUT");  
	        obj.focus();  
	    }         
	}  
    </script>
</body>
</html>